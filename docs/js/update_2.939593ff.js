(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["update_2"],{"386b":function(t,i,e){var s=e("5ca1"),n=e("79e5"),o=e("be13"),a=/"/g,l=function(t,i,e,s){var n=String(o(t)),l="<"+i;return""!==e&&(l+=" "+e+'="'+String(s).replace(a,"&quot;")+'"'),l+">"+n+"</"+i+">"};t.exports=function(t,i){var e={};e[t]=i(l),s(s.P+s.F*n(function(){var i=""[t]('"');return i!==i.toLowerCase()||i.split('"').length>3}),"String",e)}},"673e":function(t,i,e){"use strict";e("386b")("sub",function(t){return function(){return t(this,"sub","","")}})},"6e3e":function(t,i,e){},9459:function(t,i,e){"use strict";var s=e("6e3e"),n=e.n(s);n.a},e3c3:function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("h1",[t._v("Assignment 2 - Billiards")]),e("h2",[t._v("Results")]),e("BilliardsFramework"),e("h2",[t._v("Summary")]),t._m(0)],1)},n=[function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticStyle:{"text-align":"left"}},[e("div",{staticClass:"update-text"},[t._v(" \n      This checkpoint was a little tricky to get started with how heavy on the equations it is. However, after getting a sphere\n      bouncing around in a static rectangle, things sped up in implementation. Its not quite deterministic, but it looks right!\n    ")])])}],o=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("div",{staticStyle:{width:"500px",height:"500px",margin:"auto"},attrs:{id:"three-js-div"}}),e("button",{staticStyle:{margin:"10px auto"},on:{click:function(i){return t.playSim()}}},[t._v("Simulate!")]),e("div",[e("div",[t._v('Click a button, or update parameters yourself. Then click "Simulate!"')]),e("button",{staticStyle:{margin:"10px"},on:{click:function(i){return t.setupBasic()}}},[t._v("Basic Shot")]),e("button",{staticStyle:{margin:"10px"},on:{click:function(i){return t.setupFric()}}},[t._v("Basic Shot w/ Heavy Friction")]),e("button",{staticStyle:{margin:"10px"},on:{click:function(i){return t.setupRest()}}},[t._v("Basic Shot w/ Heavy Coeff. Restitution")])]),e("div",[e("div",[t._v("Parameters:")]),e("div",[e("span",[t._v("Restitution: ")]),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.co_restitution,expression:"co_restitution",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.co_restitution},on:{input:function(i){i.target.composing||(t.co_restitution=t._n(i.target.value))},blur:function(i){return t.$forceUpdate()}}})]),e("div",[e("span",[t._v("Sliding Friction: ")]),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.co_static,expression:"co_static",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.co_static},on:{input:function(i){i.target.composing||(t.co_static=t._n(i.target.value))},blur:function(i){return t.$forceUpdate()}}})]),e("div",[e("span",[t._v("Shot Force (x and y): ")]),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.initial_shot_x,expression:"initial_shot_x",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.initial_shot_x},on:{input:function(i){i.target.composing||(t.initial_shot_x=t._n(i.target.value))},blur:function(i){return t.$forceUpdate()}}}),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.initial_shot_y,expression:"initial_shot_y",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.initial_shot_y},on:{input:function(i){i.target.composing||(t.initial_shot_y=t._n(i.target.value))},blur:function(i){return t.$forceUpdate()}}})])])])},a=[],l=e("9a04"),r=e("75fc"),h=e("7fed"),c=(e("5d44"),e("486c"),e("673e"),e("ac4d"),e("8a81"),e("ac6a"),e("d225")),u=e("b0b4"),m=function(){function t(i,e,s,n){Object(c["a"])(this,t),this.co_sliding=e,this.co_restitution=i,this.isPlaying=!1,this.balls=s,this.table=n}return Object(u["a"])(t,[{key:"updateSim",value:function(t){this.isPlaying&&this.updateEverything(t)}},{key:"updateEverything",value:function(t){for(var i=this.updatePositions(t),e=this.calcMomentums(t),s=this.calcCollisions(t,i),n=0;n<this.balls.length;n++){var o=this.balls[n],a=e[n],l=s[n],r=new h["Vector2"](a.x,a.y).divideScalar(o.mass).add(l);o.vel=r}}},{key:"updatePositions",value:function(t){var i=[],e=!0,s=!1,n=void 0;try{for(var o,a=this.balls[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var l=o.value,r=l.mesh.position.x,c=l.mesh.position.y;i.push({x:r,y:c});var u=new h["Vector2"](r,c).add(new h["Vector2"](l.vel.x,l.vel.y).multiplyScalar(t));l.mesh.position.x=u.x,l.mesh.position.y=u.y}}catch(m){s=!0,n=m}finally{try{e||null==a.return||a.return()}finally{if(s)throw n}}return i}},{key:"calcMomentums",value:function(t){var i=[],e=!0,s=!1,n=void 0;try{for(var o,a=this.balls[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var l=o.value,r=this.calculate_forces(t,l.mass,l.vel),c=new h["Vector2"](l.vel.x*l.mass,l.vel.y*l.mass).add(new h["Vector2"](r.x,r.y).multiplyScalar(t));i.push(c)}}catch(u){s=!0,n=u}finally{try{e||null==a.return||a.return()}finally{if(s)throw n}}return i}},{key:"calcCollisions",value:function(t,i){for(var e=[],s=0;s<i.length;s++){var n=this.handle_border_collisions(this.balls[s],i[s].x,i[s].y);e.push(n)}return this.handle_all_ball_collisions(t,i,e),e}},{key:"handle_all_ball_collisions",value:function(t,i,e){for(var s=this.balls[0].mesh.geometry.boundingSphere.radius,n=this.balls[0].mass,o=0;o<this.balls.length;o++)for(var a=o+1;a<this.balls.length;a++)if(o!=a){var l=this.balls[o].mesh.position.x,r=this.balls[o].mesh.position.y,c=this.balls[a].mesh.position.x,u=this.balls[a].mesh.position.y,m=this.balls[o].vel,p=this.balls[a].vel,d=Math.sqrt(Math.pow(l-c,2)+Math.pow(r-u,2));if(d<=2*s){var v=new h["Vector2"](l,r).sub(new h["Vector2"](c,u)).normalize(),y=n*(new h["Vector2"](p.x,p.y).dot(v)-new h["Vector2"](m.x,m.y).dot(v))*(this.co_restitution+1)/2,b=new h["Vector2"](v.x,v.y).multiplyScalar(y/n),_=new h["Vector2"](v.x,v.y).multiplyScalar(y/n).multiplyScalar(-1);e[o].x+=b.x,e[o].y+=b.y,e[a].x+=_.x,e[a].y+=_.y,this.balls[o].mesh.position.x=i[o].x,this.balls[o].mesh.position.y=i[o].y,this.balls[a].mesh.position.x=i[a].x,this.balls[a].mesh.position.y=i[a].y}}}},{key:"play",value:function(){this.isPlaying=!0}},{key:"pause",value:function(){this.isPlaying=!1}},{key:"calculate_forces",value:function(t,i,e){if(e.length()<=0)return new h["Vector2"](0,0);var s=this.co_sliding*(9.81*i);return new h["Vector2"](-e.x,-e.y).normalize().multiplyScalar(s)}},{key:"handle_border_collisions",value:function(t,i,e){var s=this.table.position.x,n=this.table.position.y,o=this.table.geometry.parameters.width/2,a=this.table.geometry.parameters.height/2,l=t.mesh.position.x,r=t.mesh.position.y,c=t.mesh.geometry.boundingSphere.radius,u=new h["Vector2"](0,0);if(r+c>=n+a){var m=t.mesh.position.y;t.mesh.position.y=n+a-c;var p=this.lerp_find_u(m,e,t.mesh.position.y),d=t.mesh.position.x;t.mesh.position.x=this.lerp(d,i,p);var v=this.cushion_impulse(t.mass,t.vel,new h["Vector2"](0,-1));u.y+=v.y,u.x+=v.x}if(r-c<=n-a){var y=t.mesh.position.y;t.mesh.position.y=n-a+c;var b=this.lerp_find_u(y,e,t.mesh.position.y),_=t.mesh.position.x;t.mesh.position.x=this.lerp(_,i,b);var f=this.cushion_impulse(t.mass,t.vel,new h["Vector2"](0,1));u.y+=f.y,u.x+=f.x}if(l+c>=s+o){var x=t.mesh.position.x;t.mesh.position.x=s+o-c;var w=this.lerp_find_u(x,i,t.mesh.position.x),g=t.mesh.position.y;t.mesh.position.y=this.lerp(g,e,w);var S=this.cushion_impulse(t.mass,t.vel,new h["Vector2"](-1,0));u.y+=S.y,u.x+=S.x}if(l-c<=s-o){var k=t.mesh.position.x;t.mesh.position.x=s-o+c;var M=this.lerp_find_u(k,i,t.mesh.position.x),V=t.mesh.position.y;t.mesh.position.y=this.lerp(V,e,M);var B=this.cushion_impulse(t.mass,t.vel,new h["Vector2"](1,0));u.y+=B.y,u.x+=B.x}return u}},{key:"cushion_impulse",value:function(t,i,e){var s=new h["Vector2"](-i.x,-i.y).dot(e)*t*(this.co_restitution+1);return new h["Vector2"](e.x,e.y).multiplyScalar(s/t)}},{key:"lerp",value:function(t,i,e){return t+e*(i-t)}},{key:"lerp_find_u",value:function(t,i,e){return(e-t)/(i-t)}}]),t}(),p={data:function(){return{camera:null,scene:null,renderer:null,mesh:null,sceneObjects:[],animationInput:"",originTime:0,lastFrameTime:0,endTime:2e4,isPaused:!1,threeClock:null,tableWidth:19.47,tableHeight:36.57,ballSize:.855,ballMass:2550,co_restitution:.5,co_static:.3,simulation:null,initial_shot_x:-15,initial_shot_y:0,ballPositions:[{x:9,y:0,vel:[0,0],color:"#ffffff"},{x:2,y:0,vel:[0,0],color:"#4f7bdb"},{x:0,y:1,vel:[0,0],color:"#e36d19"},{x:0,y:-1,vel:[0,0],color:"#c41010"}],ballObjects:[],borderObjects:[],table:null}},methods:{init_threejs:function(){var t=document.getElementById("three-js-div");this.scene=new h["Scene"],this.camera=new h["PerspectiveCamera"](75,t.clientWidth/t.clientHeight,5,1e3),this.camera.position.z=30,this.setupScene(),this.setupSimulation(),this.renderer=new h["WebGLRenderer"]({antialias:!0}),this.renderer.setSize(t.clientWidth,t.clientHeight),this.originTime=performance.now(),this.lastFrameTime=this.originTime,this.threeClock=new h["Clock"],t.appendChild(this.renderer.domElement)},setupScene:function(){for(var t=0;t<this.ballPositions.length;t++){var i=this.ballPositions[t],e=new h["Mesh"](new h["SphereGeometry"](this.ballSize,32,32),new h["MeshBasicMaterial"]({color:i.color}));e.position.x=i.x,e.position.y=i.y,this.scene.add(e),this.ballObjects.push({mesh:e,vel:0==t?new h["Vector2"](this.initial_shot_x,this.initial_shot_y):Object(l["a"])(h["Vector2"],Object(r["a"])(i.vel)),mass:this.ballMass})}var s=new h["Mesh"](new h["BoxGeometry"](this.tableHeight,this.tableWidth,1),new h["MeshBasicMaterial"]({color:"#8aa891"}));s.position.z=-2;var n=new h["Mesh"](new h["BoxGeometry"](this.tableHeight+2.5,this.tableWidth+2,1),new h["MeshBasicMaterial"]({color:"#8aa891"}));n.position.z=-2.5;var o=new h["Mesh"](new h["BoxGeometry"](this.tableHeight+2,1,1),new h["MeshBasicMaterial"]({color:"#48695d"}));o.position.y+=this.tableWidth/2+.8;var a=new h["Mesh"](new h["BoxGeometry"](this.tableHeight+2,1,1),new h["MeshBasicMaterial"]({color:"#48695d"}));a.position.y-=this.tableWidth/2+.8;var c=new h["Mesh"](new h["BoxGeometry"](1,this.tableWidth+2.2,1),new h["MeshBasicMaterial"]({color:"#48695d"}));c.position.x-=this.tableHeight/2+.8;var u=new h["Mesh"](new h["BoxGeometry"](1,this.tableWidth+2.2,1),new h["MeshBasicMaterial"]({color:"#48695d"}));u.position.x+=this.tableHeight/2+.8,this.scene.add(s),this.scene.add(n),this.table=s,this.scene.add(o),this.scene.add(a),this.scene.add(c),this.scene.add(u),this.borderObjects.push(o,a,c,u)},updateScene:function(t){this.simulation.updateSim(t)},animationLoop:function(t){requestAnimationFrame(this.animationLoop),this.updateScene(this.threeClock.getDelta()),this.renderer.render(this.scene,this.camera)},setupSimulation:function(){this.simulation=new m(this.co_restitution,this.co_static,this.ballObjects,this.table)},playSim:function(){this.simulation.isPlaying=!1;for(var t=0;t<this.ballObjects.length;t++){var i=this.ballObjects[t];i.mesh.position.x=this.ballPositions[t].x,i.mesh.position.y=this.ballPositions[t].y,i.vel=0==t?new h["Vector2"](this.initial_shot_x,this.initial_shot_y):Object(l["a"])(h["Vector2"],Object(r["a"])(this.ballPositions[t].vel))}this.simulation=new m(this.co_restitution,this.co_static,this.ballObjects,this.table),this.simulation.isPlaying=!0},setupBasic:function(){this.co_restitution=.5,this.co_static=.3},setupFric:function(){this.co_restitution=.5,this.co_static=.95},setupRest:function(){this.co_restitution=.85,this.co_static=.3}},mounted:function(){this.init_threejs(),this.animationLoop()}},d=p,v=e("2877"),y=Object(v["a"])(d,o,a,!1,null,null,null),b=y.exports,_={components:{BilliardsFramework:b}},f=_,x=(e("9459"),Object(v["a"])(f,s,n,!1,null,null,null));i["default"]=x.exports}}]);
//# sourceMappingURL=update_2.939593ff.js.map