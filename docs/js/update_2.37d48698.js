(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["update_2"],{"386b":function(t,e,i){var s=i("5ca1"),n=i("79e5"),a=i("be13"),o=/"/g,r=function(t,e,i,s){var n=String(a(t)),r="<"+e;return""!==i&&(r+=" "+i+'="'+String(s).replace(o,"&quot;")+'"'),r+">"+n+"</"+e+">"};t.exports=function(t,e){var i={};i[t]=e(r),s(s.P+s.F*n(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",i)}},"486c":function(t,e,i){"use strict";i.d(e,"a",function(){return l});var s=i("9a04"),n=i("75fc"),a=(i("28a5"),i("d225")),o=i("b0b4"),r=i("7fed"),l=function(){function t(e){Object(a["a"])(this,t),this.parseKeyframes(e),this.isPlaying=!1,this.hasEnded=!1,this.timeline=0,this.frameIndex=0}return Object(o["a"])(t,[{key:"parseKeyframes",value:function(t){var e=t.split("\n");this.frames=[],console.log(e);for(var i=0;i<e.length;i++){var s=e[i].split(/\s+/);s.length>=8&&this.frames.push({start:1e3*parseFloat(s[0]),isEnd:i==e.length-1,x:parseFloat(s[1]),y:parseFloat(s[2]),z:parseFloat(s[3]),xa:parseFloat(s[4]),ya:parseFloat(s[5]),za:parseFloat(s[6]),theta:parseFloat(s[7]),thetaRad:parseFloat(s[7])*(Math.PI/180)})}}},{key:"playing",value:function(){return this.isPlaying&&!this.hasEnded}},{key:"restart",value:function(){this.isPlaying=!1,this.timeline=0,this.frameIndex=0,this.hasEnded=!1}},{key:"play",value:function(){this.hasEnded||(this.isPlaying=!0)}},{key:"pause",value:function(){this.isPlaying=!1}},{key:"getFrame",value:function(t){if(this.playing()){this.timeline;this.timeline+=t;var e=this.frames[this.frameIndex];while(!e.isEnd&&this.timeline>=this.frames[this.frameIndex+1].start)e=this.frames[++this.frameIndex];var i=this.computeFrameDetails(e);return e.isEnd&&(this.isPlaying=!1,this.hasEnded=!0,this.timeline=e.start),i}return{}}},{key:"computeFrameDetails",value:function(t){if(t.isEnd||this.timeline==t.start){var e=new r["Quaternion"];return e.setFromAxisAngle(new r["Vector3"](t.xa,t.ya,t.za).normalize(),t.thetaRad),{pos:{x:t.x,y:t.y,z:t.z},rot:e}}var i=this.translation_lerp(t,this.frames[this.frameIndex+1]),s=this.rotation_slerp(t,this.frames[this.frameIndex+1]);return{pos:i,rot:s}}},{key:"alt_slerp",value:function(t,e){var i=this.lerp_find_u(t.start,e.start,this.timeline),s=new r["Quaternion"],n=new r["Quaternion"];return s.setFromAxisAngle(new r["Vector3"](t.xa,t.ya,t.za).normalize(),t.thetaRad),n.setFromAxisAngle(new r["Vector3"](e.xa,e.ya,e.za).normalize(),e.thetaRad),s.slerp(n,i)}},{key:"rotation_slerp",value:function(t,e){var i=this.lerp_find_u(t.start,e.start,this.timeline),a=new r["Quaternion"],o=new r["Quaternion"];a.setFromAxisAngle(new r["Vector3"](t.xa,t.ya,t.za).normalize(),t.thetaRad),o.setFromAxisAngle(new r["Vector3"](e.xa,e.ya,e.za).normalize(),e.thetaRad),a.normalize(),o.normalize();var l=a.dot(o);l<=0&&(a.set(-a.x,-a.y,-a.z,-a.w),l=-l);var h=Math.acos(l),c=Math.sin(h),u=Math.sin((1-i)*h)/c,m=Math.sin(i*h)/c,p=Object(s["a"])(r["Vector4"],Object(n["a"])(a.toArray()));p.multiplyScalar(u);var d=Object(s["a"])(r["Vector4"],Object(n["a"])(o.toArray()));return d.multiplyScalar(m),Object(s["a"])(r["Quaternion"],Object(n["a"])(p.add(d).toArray()))}},{key:"translation_lerp",value:function(t,e){var i=this.lerp_find_u(t.start,e.start,this.timeline);return{x:this.lerp(t.x,e.x,i),y:this.lerp(t.y,e.y,i),z:this.lerp(t.z,e.z,i)}}},{key:"lerp",value:function(t,e,i){return t+i*(e-t)}},{key:"lerp_find_u",value:function(t,e,i){return(i-t)/(e-t)}}]),t}()},"673e":function(t,e,i){"use strict";i("386b")("sub",function(t){return function(){return t(this,"sub","","")}})},"6e3e":function(t,e,i){},9459:function(t,e,i){"use strict";var s=i("6e3e"),n=i.n(s);n.a},e3c3:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("h1",[t._v("Assignment 2 - Billiards")]),i("h2",[t._v("Results")]),i("BilliardsFramework"),i("h2",[t._v("Summary")]),t._m(0)],1)},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"text-align":"left"}},[i("div",{staticClass:"update-text"},[t._v(" \n      This checkpoint was a little tricky to get started with how heavy on the equations it is. However, after getting a sphere\n      bouncing around in a static rectangle, things sped up in implementation. Its not quite deterministic, but it looks right!\n    ")])])}],a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticStyle:{width:"500px",height:"500px",margin:"auto"},attrs:{id:"three-js-div"}}),i("button",{staticStyle:{margin:"10px auto"},on:{click:function(e){return t.playSim()}}},[t._v("Simulate!")]),i("div",[i("div",[t._v('Click a button, or update parameters yourself. Then click "Simulate!"')]),i("button",{staticStyle:{margin:"10px"},on:{click:function(e){return t.setupBasic()}}},[t._v("Basic Shot")]),i("button",{staticStyle:{margin:"10px"},on:{click:function(e){return t.setupFric()}}},[t._v("Basic Shot w/ Heavy Friction")]),i("button",{staticStyle:{margin:"10px"},on:{click:function(e){return t.setupRest()}}},[t._v("Basic Shot w/ Heavy Coeff. Restitution")])]),i("div",[i("div",[t._v("Parameters:")]),i("div",[i("span",[t._v("Restitution: ")]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.co_restitution,expression:"co_restitution",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.co_restitution},on:{input:function(e){e.target.composing||(t.co_restitution=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),i("div",[i("span",[t._v("Sliding Friction: ")]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.co_static,expression:"co_static",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.co_static},on:{input:function(e){e.target.composing||(t.co_static=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),i("div",[i("span",[t._v("Shot Force (x and y): ")]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.initial_shot_x,expression:"initial_shot_x",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.initial_shot_x},on:{input:function(e){e.target.composing||(t.initial_shot_x=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.initial_shot_y,expression:"initial_shot_y",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.initial_shot_y},on:{input:function(e){e.target.composing||(t.initial_shot_y=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])])])},o=[],r=i("9a04"),l=i("75fc"),h=i("7fed"),c=(i("5d44"),i("486c"),i("673e"),i("ac4d"),i("8a81"),i("ac6a"),i("d225")),u=i("b0b4"),m=function(){function t(e,i,s,n){Object(c["a"])(this,t),this.co_sliding=i,this.co_restitution=e,this.isPlaying=!1,this.balls=s,this.table=n}return Object(u["a"])(t,[{key:"updateSim",value:function(t){this.isPlaying&&this.updateEverything(t)}},{key:"updateEverything",value:function(t){for(var e=this.updatePositions(t),i=this.calcMomentums(t),s=this.calcCollisions(t,e),n=0;n<this.balls.length;n++){var a=this.balls[n],o=i[n],r=s[n],l=new h["Vector2"](o.x,o.y).divideScalar(a.mass).add(r);a.vel=l}}},{key:"updatePositions",value:function(t){var e=[],i=!0,s=!1,n=void 0;try{for(var a,o=this.balls[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){var r=a.value,l=r.mesh.position.x,c=r.mesh.position.y;e.push({x:l,y:c});var u=new h["Vector2"](l,c).add(new h["Vector2"](r.vel.x,r.vel.y).multiplyScalar(t));r.mesh.position.x=u.x,r.mesh.position.y=u.y}}catch(m){s=!0,n=m}finally{try{i||null==o.return||o.return()}finally{if(s)throw n}}return e}},{key:"calcMomentums",value:function(t){var e=[],i=!0,s=!1,n=void 0;try{for(var a,o=this.balls[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){var r=a.value,l=this.calculate_forces(t,r.mass,r.vel),c=new h["Vector2"](r.vel.x*r.mass,r.vel.y*r.mass).add(new h["Vector2"](l.x,l.y).multiplyScalar(t));e.push(c)}}catch(u){s=!0,n=u}finally{try{i||null==o.return||o.return()}finally{if(s)throw n}}return e}},{key:"calcCollisions",value:function(t,e){for(var i=[],s=0;s<e.length;s++){var n=this.handle_border_collisions(this.balls[s],e[s].x,e[s].y);i.push(n)}return this.handle_all_ball_collisions(t,e,i),i}},{key:"handle_all_ball_collisions",value:function(t,e,i){for(var s=this.balls[0].mesh.geometry.boundingSphere.radius,n=this.balls[0].mass,a=0;a<this.balls.length;a++)for(var o=a+1;o<this.balls.length;o++)if(a!=o){var r=this.balls[a].mesh.position.x,l=this.balls[a].mesh.position.y,c=this.balls[o].mesh.position.x,u=this.balls[o].mesh.position.y,m=this.balls[a].vel,p=this.balls[o].vel,d=Math.sqrt(Math.pow(r-c,2)+Math.pow(l-u,2));if(d<=2*s){var y=new h["Vector2"](r,l).sub(new h["Vector2"](c,u)).normalize(),v=n*(new h["Vector2"](p.x,p.y).dot(y)-new h["Vector2"](m.x,m.y).dot(y))*(this.co_restitution+1)/2,f=new h["Vector2"](y.x,y.y).multiplyScalar(v/n),b=new h["Vector2"](y.x,y.y).multiplyScalar(v/n).multiplyScalar(-1);i[a].x+=f.x,i[a].y+=f.y,i[o].x+=b.x,i[o].y+=b.y,this.balls[a].mesh.position.x=e[a].x,this.balls[a].mesh.position.y=e[a].y,this.balls[o].mesh.position.x=e[o].x,this.balls[o].mesh.position.y=e[o].y}}}},{key:"play",value:function(){this.isPlaying=!0}},{key:"pause",value:function(){this.isPlaying=!1}},{key:"calculate_forces",value:function(t,e,i){if(i.length()<=0)return new h["Vector2"](0,0);var s=this.co_sliding*(9.81*e);return new h["Vector2"](-i.x,-i.y).normalize().multiplyScalar(s)}},{key:"handle_border_collisions",value:function(t,e,i){var s=this.table.position.x,n=this.table.position.y,a=this.table.geometry.parameters.width/2,o=this.table.geometry.parameters.height/2,r=t.mesh.position.x,l=t.mesh.position.y,c=t.mesh.geometry.boundingSphere.radius,u=new h["Vector2"](0,0);if(l+c>=n+o){var m=t.mesh.position.y;t.mesh.position.y=n+o-c;var p=this.lerp_find_u(m,i,t.mesh.position.y),d=t.mesh.position.x;t.mesh.position.x=this.lerp(d,e,p);var y=this.cushion_impulse(t.mass,t.vel,new h["Vector2"](0,-1));u.y+=y.y,u.x+=y.x}if(l-c<=n-o){var v=t.mesh.position.y;t.mesh.position.y=n-o+c;var f=this.lerp_find_u(v,i,t.mesh.position.y),b=t.mesh.position.x;t.mesh.position.x=this.lerp(b,e,f);var _=this.cushion_impulse(t.mass,t.vel,new h["Vector2"](0,1));u.y+=_.y,u.x+=_.x}if(r+c>=s+a){var x=t.mesh.position.x;t.mesh.position.x=s+a-c;var g=this.lerp_find_u(x,e,t.mesh.position.x),w=t.mesh.position.y;t.mesh.position.y=this.lerp(w,i,g);var S=this.cushion_impulse(t.mass,t.vel,new h["Vector2"](-1,0));u.y+=S.y,u.x+=S.x}if(r-c<=s-a){var k=t.mesh.position.x;t.mesh.position.x=s-a+c;var M=this.lerp_find_u(k,e,t.mesh.position.x),V=t.mesh.position.y;t.mesh.position.y=this.lerp(V,i,M);var j=this.cushion_impulse(t.mass,t.vel,new h["Vector2"](1,0));u.y+=j.y,u.x+=j.x}return u}},{key:"cushion_impulse",value:function(t,e,i){var s=new h["Vector2"](-e.x,-e.y).dot(i)*t*(this.co_restitution+1);return new h["Vector2"](i.x,i.y).multiplyScalar(s/t)}},{key:"lerp",value:function(t,e,i){return t+i*(e-t)}},{key:"lerp_find_u",value:function(t,e,i){return(i-t)/(e-t)}}]),t}(),p={data:function(){return{camera:null,scene:null,renderer:null,mesh:null,sceneObjects:[],animationInput:"",originTime:0,lastFrameTime:0,endTime:2e4,isPaused:!1,threeClock:null,tableWidth:19.47,tableHeight:36.57,ballSize:.855,ballMass:2550,co_restitution:.5,co_static:.3,simulation:null,initial_shot_x:-15,initial_shot_y:0,ballPositions:[{x:9,y:0,vel:[0,0],color:"#ffffff"},{x:2,y:0,vel:[0,0],color:"#4f7bdb"},{x:0,y:1,vel:[0,0],color:"#e36d19"},{x:0,y:-1,vel:[0,0],color:"#c41010"}],ballObjects:[],borderObjects:[],table:null}},methods:{init_threejs:function(){var t=document.getElementById("three-js-div");this.scene=new h["Scene"],this.camera=new h["PerspectiveCamera"](75,t.clientWidth/t.clientHeight,5,1e3),this.camera.position.z=30,this.setupScene(),this.setupSimulation(),this.renderer=new h["WebGLRenderer"]({antialias:!0}),this.renderer.setSize(t.clientWidth,t.clientHeight),this.originTime=performance.now(),this.lastFrameTime=this.originTime,this.threeClock=new h["Clock"],t.appendChild(this.renderer.domElement)},setupScene:function(){for(var t=0;t<this.ballPositions.length;t++){var e=this.ballPositions[t],i=new h["Mesh"](new h["SphereGeometry"](this.ballSize,32,32),new h["MeshBasicMaterial"]({color:e.color}));i.position.x=e.x,i.position.y=e.y,this.scene.add(i),this.ballObjects.push({mesh:i,vel:0==t?new h["Vector2"](this.initial_shot_x,this.initial_shot_y):Object(r["a"])(h["Vector2"],Object(l["a"])(e.vel)),mass:this.ballMass})}var s=new h["Mesh"](new h["BoxGeometry"](this.tableHeight,this.tableWidth,1),new h["MeshBasicMaterial"]({color:"#8aa891"}));s.position.z=-2;var n=new h["Mesh"](new h["BoxGeometry"](this.tableHeight+2.5,this.tableWidth+2,1),new h["MeshBasicMaterial"]({color:"#8aa891"}));n.position.z=-2.5;var a=new h["Mesh"](new h["BoxGeometry"](this.tableHeight+2,1,1),new h["MeshBasicMaterial"]({color:"#48695d"}));a.position.y+=this.tableWidth/2+.8;var o=new h["Mesh"](new h["BoxGeometry"](this.tableHeight+2,1,1),new h["MeshBasicMaterial"]({color:"#48695d"}));o.position.y-=this.tableWidth/2+.8;var c=new h["Mesh"](new h["BoxGeometry"](1,this.tableWidth+2.2,1),new h["MeshBasicMaterial"]({color:"#48695d"}));c.position.x-=this.tableHeight/2+.8;var u=new h["Mesh"](new h["BoxGeometry"](1,this.tableWidth+2.2,1),new h["MeshBasicMaterial"]({color:"#48695d"}));u.position.x+=this.tableHeight/2+.8,this.scene.add(s),this.scene.add(n),this.table=s,this.scene.add(a),this.scene.add(o),this.scene.add(c),this.scene.add(u),this.borderObjects.push(a,o,c,u)},updateScene:function(t){this.simulation.updateSim(t)},animationLoop:function(t){requestAnimationFrame(this.animationLoop),this.updateScene(this.threeClock.getDelta()),this.renderer.render(this.scene,this.camera)},setupSimulation:function(){this.simulation=new m(this.co_restitution,this.co_static,this.ballObjects,this.table)},playSim:function(){this.simulation.isPlaying=!1;for(var t=0;t<this.ballObjects.length;t++){var e=this.ballObjects[t];e.mesh.position.x=this.ballPositions[t].x,e.mesh.position.y=this.ballPositions[t].y,e.vel=0==t?new h["Vector2"](this.initial_shot_x,this.initial_shot_y):Object(r["a"])(h["Vector2"],Object(l["a"])(this.ballPositions[t].vel))}this.simulation=new m(this.co_restitution,this.co_static,this.ballObjects,this.table),this.simulation.isPlaying=!0},setupBasic:function(){this.co_restitution=.5,this.co_static=.3},setupFric:function(){this.co_restitution=.5,this.co_static=.95},setupRest:function(){this.co_restitution=.85,this.co_static=.3}},mounted:function(){this.init_threejs(),this.animationLoop()}},d=p,y=i("2877"),v=Object(y["a"])(d,a,o,!1,null,null,null),f=v.exports,b={components:{BilliardsFramework:f}},_=b,x=(i("9459"),Object(y["a"])(_,s,n,!1,null,null,null));e["default"]=x.exports}}]);
//# sourceMappingURL=update_2.37d48698.js.map